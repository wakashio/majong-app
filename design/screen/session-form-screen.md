# セッション作成・編集画面

## 概要

セッションを作成・編集する画面です。日付と参加者の選択を行います。

## 画面構成

### レイアウト

- ヘッダー: 画面タイトル「セッション作成」または「セッション編集」
- メインコンテンツ:
  - セッション名入力欄
  - 日付選択
  - 参加者選択セクション（4人以上）
  - 保存ボタン
  - キャンセルボタン

## 画面項目

### ヘッダー

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 画面タイトル | テキスト | 「セッション作成」または「セッション編集」 |

### セッション名入力欄

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| セッション名 | テキスト入力 | セッションの名前（オプション） |

### 日付選択

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 日付 | 日付選択 | セッションの日付（YYYY-MM-DD形式、必須） |

### 参加者選択セクション

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 参加者選択 | PlayerSelectButton | 参加者を複数選択（4人以上、必須） |

### アクションボタン

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 保存ボタン | ボタン | セッションを保存 |
| キャンセルボタン | ボタン | セッション一覧画面に戻る |

## 画面遷移

### 遷移元

- セッション一覧画面（新規作成ボタンクリック時）
- セッション一覧画面（編集ボタンクリック時）

### 遷移先

- セッション一覧画面（保存成功時、キャンセルボタンクリック時）
- **セッション詳細画面（新規作成時のみ）**: セッション作成成功後、`/sessions/:sessionId`に遷移

## 機能

### 参加者一覧取得

- 画面表示時に`GET /api/players`を呼び出し、参加者一覧を取得
- 取得したデータを`PlayerSelectButton`コンポーネントに表示（ボタン形式）

### セッション作成

- 保存ボタンクリック時にバリデーションを実行
- バリデーション成功後、`POST /api/sessions`を呼び出し、セッションを作成
- 作成成功後、セッション詳細画面（`/sessions/:sessionId`）に遷移
- エラー時はエラーメッセージを表示

### セッション編集

- 画面表示時に`GET /api/sessions/:id`を呼び出し、セッション情報を取得
- 取得したデータをフォームに表示
- 保存ボタンクリック時にバリデーションを実行
- バリデーション成功後、`PUT /api/sessions/:id`を呼び出し、セッションを更新
- 更新成功後、セッション一覧画面に遷移
- エラー時はエラーメッセージを表示

### バリデーション

- セッション名は100文字以下
- 日付は必須
- 参加者は4人以上選択されている必要がある
- 参加者は重複して選択できない

## リアルタイム更新

- 参加者の選択・変更時にバリデーションを実行
- 保存成功後、セッション一覧画面で一覧を再取得

## UI/UX

### デザイン

- Vuetifyのコンポーネントを使用
- フォームは`v-form`を使用
- **参加者選択**: `PlayerSelectButton`コンポーネントを使用（ボタン形式、複数選択可能）
  - 4人以上選択可能
  - `v-chip`を使用したグリッドレイアウトで表示
- 日付選択は`v-date-picker`を使用
- ボタンは`v-btn`を使用

### エラーハンドリング

- バリデーションエラー時は各入力欄の下にエラーメッセージを表示
- APIエラー時は`v-alert`でエラーメッセージを表示
- ネットワークエラー時も適切にエラーメッセージを表示

### ローディング

- データ取得中はローディングインジケーターを表示
- 保存中は保存ボタンを無効化し、ローディングインジケーターを表示

## 実装メモ

- Vue 3 Composition APIを使用
- TypeScriptで型安全性を確保
- 参加者の重複チェックを実装
- 参加者は4人以上選択する必要がある（バリデーション）

