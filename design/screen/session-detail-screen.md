# セッション詳細画面

## 概要

セッションの詳細情報を表示し、そのセッションに紐づく半荘を管理する画面です。セッション詳細画面から半荘を作成できます。

## 画面構成

### レイアウト

- ヘッダー: 画面タイトル「セッション詳細」
- メインコンテンツ:
  - セッション情報セクション
  - 参加者一覧セクション
  - 半荘一覧セクション
  - 統計情報セクション（オプション）
  - 半荘作成ボタン

## 画面項目

### ヘッダー

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 画面タイトル | テキスト | 「セッション詳細」 |
| 編集ボタン | ボタン | セッション編集画面に遷移 |
| 削除ボタン | ボタン | セッションを削除（確認ダイアログ表示） |

### セッション情報セクション

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 日付 | 日付 | セッションの日付（YYYY-MM-DD形式） |
| セッション名 | テキスト | セッションの名前（未設定の場合は「無題」と表示） |

### 参加者一覧セクション

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 参加者一覧 | リスト | 参加者名をリスト表示 |

### 半荘一覧セクション

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 半荘一覧テーブル | テーブル | そのセッションに紐づく半荘の一覧 |
| 半荘名 | テキスト | 半荘の名前（未設定の場合は「無題」と表示） |
| 参加者 | テキスト | 参加者名をカンマ区切りで表示（4人） |
| 開始日時 | 日時 | 半荘の開始日時 |
| 終了日時 | 日時 | 半荘の終了日時（進行中の場合は「-」） |
| ステータス | バッジ | 進行中/完了済み |
| 詳細ボタン | ボタン | 局管理画面に遷移 |

### 統計情報セクション（オプション）

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 総局数 | 数値 | そのセッションの総局数 |
| 総半荘数 | 数値 | そのセッションの総半荘数 |
| 参加者ごとの成績 | テーブル | 参加者ごとの和了回数、ツモ回数、ロン回数、放銃回数、流局回数、平均点数、順位 |

### アクションボタン

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 半荘作成ボタン | ボタン | 半荘作成画面に遷移（セッションIDを自動設定） |

## 画面遷移

### 遷移元

- セッション一覧画面（詳細ボタンクリック時、または行クリック時）

### 遷移先

- セッション一覧画面（削除成功時、または戻るボタンクリック時）
- セッション編集画面（編集ボタンクリック時）
- **半荘作成画面**: 半荘作成ボタンクリック時、`/hanchans/new?sessionId=:sessionId`に遷移
- 局管理画面（半荘詳細ボタンクリック時）

## 機能

### セッション詳細取得

- 画面表示時に`GET /api/sessions/:id`を呼び出し、セッション詳細情報を取得
- 取得したデータを表示
- エラー時はエラーメッセージを表示

### 半荘一覧取得

- セッション詳細情報に含まれる半荘一覧を表示
- そのセッションに紐づく半荘のみを表示

### 統計情報取得

- 画面表示時に`GET /api/sessions/:id/statistics`を呼び出し、統計情報を取得
- 取得したデータを表示
- エラー時はエラーメッセージを表示

### 半荘作成

- 半荘作成ボタンクリック時、半荘作成画面（`/hanchans/new?sessionId=:sessionId`）に遷移
- セッションIDをURLパラメータで渡す
- 半荘作成画面で、セッションの参加者から4人を選択する方式

### セッション削除

- 削除ボタンクリック時に確認ダイアログを表示
- 確認後、`DELETE /api/sessions/:id`を呼び出し、セッションを削除
- 削除成功後、セッション一覧画面に遷移
- エラー時はエラーメッセージを表示

## リアルタイム更新

- 半荘の作成・更新・削除後、半荘一覧を自動更新
- 他の画面から戻ってきた場合も一覧を再取得

## UI/UX

### デザイン

- Vuetifyのコンポーネントを使用
- テーブルは`v-data-table`を使用
- ボタンは`v-btn`を使用
- ステータスは`v-chip`を使用

### エラーハンドリング

- APIエラー時は`v-alert`でエラーメッセージを表示
- ネットワークエラー時も適切にエラーメッセージを表示

### ローディング

- データ取得中はローディングインジケーターを表示

## 実装メモ

- Vue 3 Composition APIを使用
- TypeScriptで型安全性を確保
- リアルタイム更新は必要に応じて実装（現時点では手動更新）
- 参加者名は`sessionPlayers`から取得して表示
- 半荘一覧は`hanchans`から取得して表示

