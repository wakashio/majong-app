# 統計・履歴表示画面

## 概要

統計情報と履歴を表示する画面です。参加者統計、半荘統計、履歴一覧を表示します。

## 画面構成

### レイアウト

- ヘッダー: 画面タイトル「統計・履歴」
- タブ: 参加者統計、半荘統計、履歴
- メインコンテンツ: タブに応じたコンテンツ表示

## 画面項目

### ヘッダー

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 画面タイトル | テキスト | 「統計・履歴」 |

### タブ

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 参加者統計タブ | タブ | 参加者統計を表示 |
| 半荘統計タブ | タブ | 半荘統計を表示 |
| 履歴タブ | タブ | 履歴一覧を表示 |

### 参加者統計タブ

#### 参加者選択

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 参加者選択 | セレクトボックス | 統計を表示する参加者を選択 |

#### 統計情報表示

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 参加者名 | テキスト | 選択した参加者名 |
| 参加半荘数 | 数値 | 参加した半荘数 |
| 参加局数 | 数値 | 参加した局数 |
| 総和了回数 | 数値 | ツモ + ロン回数 |
| ツモ回数 | 数値 | ツモ回数 |
| ロン回数 | 数値 | ロン回数 |
| 放銃回数 | 数値 | 放銃回数 |
| 流局回数 | 数値 | 流局回数 |
| 平均順位 | 数値 | 平均順位（1.0-4.0） |
| 平均最終得点 | 数値 | 平均最終得点 |
| 最高最終得点 | 数値 | 最高最終得点 |
| 最低最終得点 | 数値 | 最低最終得点 |
| 和了率 | 数値 | 和了率（%） |
| 放銃率 | 数値 | 放銃率（%） |

### 半荘統計タブ

#### 半荘選択

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 半荘選択 | セレクトボックス | 統計を表示する半荘を選択 |

#### 統計情報表示

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 半荘名 | テキスト | 選択した半荘名 |
| 開始日時 | 日時 | 開始日時 |
| 終了日時 | 日時 | 終了日時（完了している場合のみ） |
| ステータス | バッジ | 進行中/完了済み |
| 局数 | 数値 | 局数 |
| 参加者一覧テーブル | テーブル | 参加者ごとの統計情報 |
| 参加者名 | テキスト | 参加者名 |
| 席順 | 数値 | 席順（0-3） |
| 開始点数 | 数値 | 開始点数 |
| 最終得点 | 数値 | 最終得点（完了している場合のみ） |
| 順位 | 数値 | 順位（1-4、完了している場合のみ） |
| 和了回数 | 数値 | 和了回数 |
| ツモ回数 | 数値 | ツモ回数 |
| ロン回数 | 数値 | ロン回数 |
| 放銃回数 | 数値 | 放銃回数 |
| 流局回数 | 数値 | 流局回数 |

### 履歴タブ

#### 履歴タイプ選択

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 履歴タイプ | ラジオボタン | 参加者履歴/半荘履歴を選択 |

#### 参加者履歴

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 参加者選択 | セレクトボックス | 履歴を表示する参加者を選択 |
| 履歴一覧テーブル | テーブル | 参加者が参加した半荘の一覧 |
| 半荘名 | テキスト | 半荘名 |
| 開始日時 | 日時 | 開始日時 |
| 終了日時 | 日時 | 終了日時（完了している場合のみ） |
| ステータス | バッジ | 進行中/完了済み |
| 席順 | 数値 | 席順（0-3） |
| 開始点数 | 数値 | 開始点数 |
| 最終得点 | 数値 | 最終得点（完了している場合のみ） |
| 順位 | 数値 | 順位（1-4、完了している場合のみ） |
| 局数 | 数値 | 局数 |
| 詳細ボタン | ボタン | 半荘詳細画面に遷移 |

#### 半荘履歴

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 半荘選択 | セレクトボックス | 履歴を表示する半荘を選択 |
| 履歴一覧テーブル | テーブル | 半荘内の局の一覧 |
| 局番号 | 数値 | 局番号（1-16） |
| 風 | テキスト | 東/南/西/北 |
| 親 | テキスト | 親の参加者名 |
| 本場 | 数値 | 本場数 |
| 積み棒 | 数値 | 積み棒数 |
| 連荘 | バッジ | 連荘かどうか |
| ステータス | バッジ | 未開始/進行中/完了済み |
| 結果 | テキスト | ツモ/ロン/流局など |
| 開始日時 | 日時 | 開始日時（開始している場合のみ） |
| 終了日時 | 日時 | 終了日時（完了している場合のみ） |
| 詳細ボタン | ボタン | 局管理画面に遷移 |

## 画面遷移

### 参加者統計タブ

- 参加者選択 → 統計情報表示（API: `GET /api/players/:id/statistics`）

### 半荘統計タブ

- 半荘選択 → 統計情報表示（API: `GET /api/hanchans/:id/statistics`）

### 履歴タブ

#### 参加者履歴

- 参加者選択 → 履歴一覧表示（API: `GET /api/players/:id/history`）
- 詳細ボタン → 半荘詳細画面（`/hanchans/:id`）

#### 半荘履歴

- 半荘選択 → 履歴一覧表示（API: `GET /api/hanchans/:id/history`）
- 詳細ボタン → 局管理画面（`/rounds/:id`）

## 実装メモ

- タブ切り替えはVuetifyの`v-tabs`コンポーネントを使用
- 統計情報はリアルタイムで計算（キャッシュは不要）
- ページネーションをサポート（履歴一覧）
- データが存在しない場合、適切なメッセージを表示

## 関連ドキュメント

- `design/api/players-statistics.md`: 参加者統計取得API
- `design/api/hanchans-statistics.md`: 半荘統計取得API
- `design/api/players-history.md`: 参加者履歴取得API
- `design/api/hanchans-history.md`: 半荘履歴取得API
- `design/screen/hanchan-list-screen.md`: 半荘一覧画面
- `design/screen/round-list-screen.md`: 局一覧画面

