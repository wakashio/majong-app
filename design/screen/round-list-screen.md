# 局一覧画面

## 削除予定

この画面は削除予定です。`RoundManageView.vue`（局管理画面）にExpansionPanel方式で統合されます。

## 削除理由

- `RoundManageView.vue`をExpansionPanel方式に変更し、全局を1つの画面で管理できるようになったため
- 局一覧画面と局管理画面を統合することで、画面遷移が不要になり、操作性が向上するため

## 削除日

2025-12-31

## 代替画面

`RoundManageView.vue`（局管理画面）を参照してください。

## 旧設計（参考）

### 概要

半荘内の局一覧を表示する画面です。半荘詳細画面内に表示されるコンポーネントとして実装することも可能です。

### 画面構成

#### レイアウト

- ヘッダー: 画面タイトル「局一覧」または半荘名
- メインコンテンツ:
  - 新規開始ボタン
  - フィルター（未開始/進行中/完了済み）
  - 局一覧テーブル
  - 編集・削除ボタン（各行）

### 画面項目

#### ヘッダー

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 画面タイトル | テキスト | 「局一覧」または半荘名 |

#### 新規開始ボタン

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 新規開始ボタン | ボタン | 局開始画面に遷移 |

#### フィルター

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| ステータスフィルター | セレクトボックス | 未開始/進行中/完了済み/すべてでフィルタリング |

#### 局一覧テーブル

| 項目名 | タイプ | 説明 |
|--------|--------|------|
| 局番号 | テキスト | 局番号（1-16） |
| 風 | テキスト | 東/南/西/北 |
| 親 | テキスト | 親の参加者名 |
| 本場 | 整数 | 本場数 |
| 積み棒 | 整数 | 積み棒数 |
| 連荘 | バッジ | 連荘かどうか |
| ステータス | バッジ | 未開始/進行中/完了済み |
| 結果 | テキスト | ツモ/ロン/流局など |
| 編集ボタン | ボタン | 局管理画面に遷移 |
| 削除ボタン | ボタン | 局を削除（確認ダイアログ表示） |

### 画面遷移

#### 遷移元

- 半荘詳細画面（半荘詳細画面内に表示される場合）
- 半荘一覧画面（局一覧画面として独立している場合）

#### 遷移先

- 局開始画面（新規開始ボタンクリック時）
- 局管理画面（編集ボタンクリック時、行クリック時）

### 機能

#### 局一覧取得

- 画面表示時に`GET /api/hanchans/:hanchanId/rounds`を呼び出し、局一覧を取得
- 取得したデータをテーブルに表示
- エラー時はエラーメッセージを表示

#### フィルター機能

- ステータスフィルターで未開始/進行中/完了済み/すべてを切り替え
- フィルター変更時に`GET /api/hanchans/:hanchanId/rounds?status=xxx`を呼び出し、一覧を再取得

#### 局削除

- 削除ボタンクリック時に確認ダイアログを表示
- 確認後、`DELETE /api/rounds/:id`を呼び出し、局を削除
- 削除成功後、一覧を再取得
- エラー時はエラーメッセージを表示

### リアルタイム更新

- 局の作成・更新・削除後、一覧を自動更新
- 他の画面から戻ってきた場合も一覧を再取得

### UI/UX

#### デザイン

- Vuetifyのコンポーネントを使用
- テーブルは`v-data-table`を使用
- ボタンは`v-btn`を使用
- ステータスは`v-chip`を使用

#### エラーハンドリング

- APIエラー時は`v-alert`でエラーメッセージを表示
- ネットワークエラー時も適切にエラーメッセージを表示

#### ローディング

- データ取得中はローディングインジケーターを表示

### 実装メモ

- Vue 3 Composition APIを使用
- TypeScriptで型安全性を確保
- リアルタイム更新は必要に応じて実装（現時点では手動更新）
- 半荘詳細画面内に表示される場合はコンポーネントとして実装
